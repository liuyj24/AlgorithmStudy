### 单调栈结构
> 这个结构有什么用处? 

- 用于求在一个数组中, 某个数左边离他最近的比他小的数, 和右边离他最近的比他大的数. 
- 用暴力遍历的方法当然可以得到O(N^2), 现在的需求是时间复杂度O(N), 获得整个数组所有数的以上信息. 


![image](E456DD2411E143E1AD1DCEE62FDFB40A)

```
举例子: 
数组: [0, 5, 4, 3, 6, 2, 1]
下标: |0, 1, 2, 3, 4, 5, 6|
操作单调栈的时候用下标进行操作

单调栈按从底向上是从小到大地排列. 
规则是: 如果一个数入栈发现它比下面的数B小, 那么数B就要弹栈, 在这弹栈的过程中, B的信息就确定好了: 左边最近比他小的是它压着的数, 右边比他小的就是现在要加入的数
1. 首先0入栈
2. 5入栈, 5比0大, 正常入栈
3. 4入栈, 4比5小, 5弹栈, 5的左边最近是0, 右边最近是4
...以此类推
4. 最后没有数入栈了, 就依次按规则出栈. 这个时候出栈的数左右的信息可能会出现无.
```
> 如何处理数据相等的情况呢? 

- 出现了相等的数, 就把它存放在首次出现的位置, 下标放在一起, 但是放下标的时候是严格按照先后顺序的. 
![image](FCFD1D4636664E17A2094EDD931E74A7)

#### 真题: 累加和与最小值乘积
> 在一个数组中, 求它所有子数组中元素累加和和最小值乘积的最大值.  

- 大体的流程是: 遍历数组中的每一个数, 以每个数为基准, 找到以它为最小值的子数组, 再求累加和最小值乘积, 最后综合所有结果得出答案. 
```
举例: 数组[3, 5, 7, 2, 1, 6, 1]
- 对3来说, 以他为最小值的子数组是[3, 5, 7]
- 对5来说, 以他为最小值的子数组是[5, 7]
- 对7来说, 以他为最小值的子数组是[7]
对每个数都求出这样的特殊子数组后, 就能求累加和与最小值乘积了

这道题目用单调栈解十分方便
比如用单调栈求出子数组[y..... x .....z]
y, z是x左右两边比他小且离他最近的元素的下标,
那么y+1到z-1就是这个子数组的累加和, 乘以x下标对应的数就是结果了.
```

